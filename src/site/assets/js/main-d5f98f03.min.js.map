{"version":3,"file":"main-d5f98f03.min.js","sources":["../../../../node_modules/instant.page/instantpage.js"],"sourcesContent":["/*! instant.page v5.1.0 - (C) 2019-2020 Alexandre Dieulot - https://instant.page/license */\n\nlet mouseoverTimer\nlet lastTouchTimestamp\nconst prefetches = new Set()\nconst prefetchElement = document.createElement('link')\nconst isSupported = prefetchElement.relList && prefetchElement.relList.supports && prefetchElement.relList.supports('prefetch')\n                    && window.IntersectionObserver && 'isIntersecting' in IntersectionObserverEntry.prototype\nconst allowQueryString = 'instantAllowQueryString' in document.body.dataset\nconst allowExternalLinks = 'instantAllowExternalLinks' in document.body.dataset\nconst useWhitelist = 'instantWhitelist' in document.body.dataset\nconst mousedownShortcut = 'instantMousedownShortcut' in document.body.dataset\nconst DELAY_TO_NOT_BE_CONSIDERED_A_TOUCH_INITIATED_ACTION = 1111\n\nlet delayOnHover = 65\nlet useMousedown = false\nlet useMousedownOnly = false\nlet useViewport = false\n\nif ('instantIntensity' in document.body.dataset) {\n  const intensity = document.body.dataset.instantIntensity\n\n  if (intensity.substr(0, 'mousedown'.length) == 'mousedown') {\n    useMousedown = true\n    if (intensity == 'mousedown-only') {\n      useMousedownOnly = true\n    }\n  }\n  else if (intensity.substr(0, 'viewport'.length) == 'viewport') {\n    if (!(navigator.connection && (navigator.connection.saveData || (navigator.connection.effectiveType && navigator.connection.effectiveType.includes('2g'))))) {\n      if (intensity == \"viewport\") {\n        /* Biggest iPhone resolution (which we want): 414 × 896 = 370944\n         * Small 7\" tablet resolution (which we don’t want): 600 × 1024 = 614400\n         * Note that the viewport (which we check here) is smaller than the resolution due to the UI’s chrome */\n        if (document.documentElement.clientWidth * document.documentElement.clientHeight < 450000) {\n          useViewport = true\n        }\n      }\n      else if (intensity == \"viewport-all\") {\n        useViewport = true\n      }\n    }\n  }\n  else {\n    const milliseconds = parseInt(intensity)\n    if (!isNaN(milliseconds)) {\n      delayOnHover = milliseconds\n    }\n  }\n}\n\nif (isSupported) {\n  const eventListenersOptions = {\n    capture: true,\n    passive: true,\n  }\n\n  if (!useMousedownOnly) {\n    document.addEventListener('touchstart', touchstartListener, eventListenersOptions)\n  }\n\n  if (!useMousedown) {\n    document.addEventListener('mouseover', mouseoverListener, eventListenersOptions)\n  }\n  else if (!mousedownShortcut) {\n      document.addEventListener('mousedown', mousedownListener, eventListenersOptions)\n  }\n\n  if (mousedownShortcut) {\n    document.addEventListener('mousedown', mousedownShortcutListener, eventListenersOptions)\n  }\n\n  if (useViewport) {\n    let triggeringFunction\n    if (window.requestIdleCallback) {\n      triggeringFunction = (callback) => {\n        requestIdleCallback(callback, {\n          timeout: 1500,\n        })\n      }\n    }\n    else {\n      triggeringFunction = (callback) => {\n        callback()\n      }\n    }\n\n    triggeringFunction(() => {\n      const intersectionObserver = new IntersectionObserver((entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            const linkElement = entry.target\n            intersectionObserver.unobserve(linkElement)\n            preload(linkElement.href)\n          }\n        })\n      })\n\n      document.querySelectorAll('a').forEach((linkElement) => {\n        if (isPreloadable(linkElement)) {\n          intersectionObserver.observe(linkElement)\n        }\n      })\n    })\n  }\n}\n\nfunction touchstartListener(event) {\n  /* Chrome on Android calls mouseover before touchcancel so `lastTouchTimestamp`\n   * must be assigned on touchstart to be measured on mouseover. */\n  lastTouchTimestamp = performance.now()\n\n  const linkElement = event.target.closest('a')\n\n  if (!isPreloadable(linkElement)) {\n    return\n  }\n\n  preload(linkElement.href)\n}\n\nfunction mouseoverListener(event) {\n  if (performance.now() - lastTouchTimestamp < DELAY_TO_NOT_BE_CONSIDERED_A_TOUCH_INITIATED_ACTION) {\n    return\n  }\n\n  const linkElement = event.target.closest('a')\n\n  if (!isPreloadable(linkElement)) {\n    return\n  }\n\n  linkElement.addEventListener('mouseout', mouseoutListener, {passive: true})\n\n  mouseoverTimer = setTimeout(() => {\n    preload(linkElement.href)\n    mouseoverTimer = undefined\n  }, delayOnHover)\n}\n\nfunction mousedownListener(event) {\n  const linkElement = event.target.closest('a')\n\n  if (!isPreloadable(linkElement)) {\n    return\n  }\n\n  preload(linkElement.href)\n}\n\nfunction mouseoutListener(event) {\n  if (event.relatedTarget && event.target.closest('a') == event.relatedTarget.closest('a')) {\n    return\n  }\n\n  if (mouseoverTimer) {\n    clearTimeout(mouseoverTimer)\n    mouseoverTimer = undefined\n  }\n}\n\nfunction mousedownShortcutListener(event) {\n  if (performance.now() - lastTouchTimestamp < DELAY_TO_NOT_BE_CONSIDERED_A_TOUCH_INITIATED_ACTION) {\n    return\n  }\n\n  const linkElement = event.target.closest('a')\n\n  if (event.which > 1 || event.metaKey || event.ctrlKey) {\n    return\n  }\n\n  if (!linkElement) {\n    return\n  }\n\n  linkElement.addEventListener('click', function (event) {\n    if (event.detail == 1337) {\n      return\n    }\n\n    event.preventDefault()\n  }, {capture: true, passive: false, once: true})\n\n  const customEvent = new MouseEvent('click', {view: window, bubbles: true, cancelable: false, detail: 1337})\n  linkElement.dispatchEvent(customEvent)\n}\n\nfunction isPreloadable(linkElement) {\n  if (!linkElement || !linkElement.href) {\n    return\n  }\n\n  if (useWhitelist && !('instant' in linkElement.dataset)) {\n    return\n  }\n\n  if (!allowExternalLinks && linkElement.origin != location.origin && !('instant' in linkElement.dataset)) {\n    return\n  }\n\n  if (!['http:', 'https:'].includes(linkElement.protocol)) {\n    return\n  }\n\n  if (linkElement.protocol == 'http:' && location.protocol == 'https:') {\n    return\n  }\n\n  if (!allowQueryString && linkElement.search && !('instant' in linkElement.dataset)) {\n    return\n  }\n\n  if (linkElement.hash && linkElement.pathname + linkElement.search == location.pathname + location.search) {\n    return\n  }\n\n  if ('noInstant' in linkElement.dataset) {\n    return\n  }\n\n  return true\n}\n\nfunction preload(url) {\n  if (prefetches.has(url)) {\n    return\n  }\n\n  const prefetcher = document.createElement('link')\n  prefetcher.rel = 'prefetch'\n  prefetcher.href = url\n  document.head.appendChild(prefetcher)\n\n  prefetches.add(url)\n}\n"],"names":["mouseoverTimer","lastTouchTimestamp","prefetches","Set","prefetchElement","document","createElement","isSupported","relList","supports","window","IntersectionObserver","IntersectionObserverEntry","prototype","allowQueryString","body","dataset","allowExternalLinks","useWhitelist","mousedownShortcut","DELAY_TO_NOT_BE_CONSIDERED_A_TOUCH_INITIATED_ACTION","delayOnHover","useMousedown","useMousedownOnly","useViewport","intensity","instantIntensity","substr","length","navigator","connection","saveData","effectiveType","includes","documentElement","clientWidth","clientHeight","milliseconds","parseInt","isNaN","eventListenersOptions","capture","passive","addEventListener","event","performance","now","linkElement","target","closest","isPreloadable","preload","href","mouseoutListener","setTimeout","undefined","which","metaKey","ctrlKey","detail","preventDefault","once","customEvent","MouseEvent","view","bubbles","cancelable","dispatchEvent","triggeringFunction","requestIdleCallback","callback","timeout","intersectionObserver","entries","forEach","entry","isIntersecting","unobserve","querySelectorAll","observe","relatedTarget","clearTimeout","origin","location","protocol","search","hash","pathname","url","has","prefetcher","rel","head","appendChild","add"],"mappings":"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"}